<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Snake Game</title>
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
      }
    </style>
  </head>
  <body>
    <canvas
      id="canvas"
      style="border: 1px solid #222"
      width="300"
      height="400"
    ></canvas>

    <script>
      const canvas = document.getElementById("canvas");
      const ctx = canvas.getContext("2d");
      const GRID_WIDTH = 500;
      const GRID_HEIGHT = 400;
      let APPLE_X = Math.ceil(Math.random() * 500);
      let APPLE_Y = Math.ceil(Math.random() * 400);
      let SNAKE_X = 0;
      let SNAKE_Y = 0;
      let direction = "";
      let eaten = false;

      const createSnake = () => {
        ctx.fillStyle = "green";
        ctx.fillRect(SNAKE_X, SNAKE_Y, 10, 10);
      };

      const checkToSeeIfSnakeAteTheApple = () => {
        if (
          SNAKE_X - 10 <= APPLE_X &&
          SNAKE_X + 10 >= APPLE_X &&
          SNAKE_Y - 10 <= APPLE_Y &&
          SNAKE_Y + 10 >= APPLE_Y
        ) {
          eaten = true;
        }
      };

      const createApple = () => {
        if (eaten) {
          let APPLE_X = Math.ceil(Math.random() * 500);
          let APPLE_Y = Math.ceil(Math.random() * 400);

          eaten = false;
        } else {
          ctx.fillStyle = "red";
          ctx.fillRect(APPLE_X, APPLE_Y, 10, 10);
        }
      };

      const moveSnake = (direction) => {
        if (direction === "left") {
          SNAKE_X -= 2;
        } else if (direction === "up") {
          SNAKE_Y -= 2;
        } else if (direction === "right") {
          SNAKE_X += 2;
        } else if (direction === "down") {
          SNAKE_Y += 2;
        }
      };

      const clearGameboard = () => {
        ctx.clearRect(0, 0, GRID_WIDTH, GRID_HEIGHT);
      };

      const controls = (e) => {
        const key = e.keyCode;
        switch (key) {
          case 65:
            direction = "left"; // a
            break;
          case 87:
            direction = "up"; // w
            break;
          case 83:
            direction = "down"; // s
            break;
          case 68:
            direction = "right"; // d
            break;
        }
      };

      const game = () => {
        clearGameboard();
        createSnake();
        checkToSeeIfSnakeAteTheApple();
        createApple();
        moveSnake(direction);

        requestAnimationFrame(game);
      };

      game();

      document.addEventListener("keydown", (e) => controls(e));
    </script>
  </body>
</html>
